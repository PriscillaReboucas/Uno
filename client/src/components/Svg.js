import React, { useContext, useEffect, useState } from 'react';
import { UnoContext } from '../UnoContext';
import parse from "html-react-parser";
import "./Svg.css";
import { useDrag } from '@use-gesture/react'

const Svg = () => {

  const { svgCards, fetchSVGCards } = useContext(UnoContext);

  const [cardPosition, setCardPosition ] = useState ({x: 0, y:0});
  const dragPosition = useDrag((params)=>{
    setCardPosition({
      x: params.offset[0],
      y: params.offset[1],
    })
  });

  useEffect(() => {
    fetchSVGCards();
  }, [])


const back = <svg width="242" height="362" viewBox="0 0 242 362" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M201 1H41C18.9086 1 1 18.9086 1 41V321C1 343.091 18.9086 361 41 361H201C223.091 361 241 343.091 241 321V41C241 18.9086 223.091 1 201 1Z" fill="white" stroke="black" strokeWidth="2"/>
<path d="M201 21H41C29.9543 21 21 29.9543 21 41V321C21 332.046 29.9543 341 41 341H201C212.046 341 221 332.046 221 321V41C221 29.9543 212.046 21 201 21Z" fill="black"/>
<path fillRule="evenodd" clipRule="evenodd" d="M181 81C92.6344 81 21 152.634 21 241C21 263.091 38.9086 281 61 281C149.366 281 221 209.366 221 121C221 98.9086 203.091 81 181 81Z" fill="#ED1C24"/>
<path fillRule="evenodd" clipRule="evenodd" d="M96.1101 120.794C120.038 108.035 145.797 105.391 166.862 110.334C214.832 121.714 218.61 157.922 193.079 195.28C181.402 212.407 164.115 228.844 143.278 239.19C109.047 256.202 76.3041 257.121 54.7808 244.017C33.143 230.913 27.9912 208.844 35.6617 185.394C43.5612 161.026 65.6569 135.967 96.1101 120.794V120.794Z" fill="#ED1C24"/>
<path d="M171.441 148.497C171.327 149.876 171.327 151.255 171.556 152.635C171.785 154.129 172.128 155.738 172.701 157.233C173.502 159.417 174.647 161.371 175.906 162.98C177.051 164.474 178.425 165.624 180.028 166.543C181.974 167.348 183.806 167.808 185.294 167.693C186.553 167.693 187.469 167.348 188.156 166.773C188.614 166.313 188.957 165.624 189.072 164.704C189.301 163.44 189.072 161.831 188.728 159.761C188.614 159.187 188.5 158.727 188.385 158.152C188.271 157.692 188.042 157.118 187.927 156.658C186.897 154.014 185.523 151.6 183.806 149.761C182.317 148.152 180.486 147.002 178.539 146.428C176.479 145.853 174.761 145.853 173.502 146.313C172.701 146.658 172.014 147.232 171.67 148.152L171.441 148.497ZM170.525 116.082C180.715 112.288 190.789 113.093 199.376 117.346C208.306 121.714 215.518 129.875 219.296 140.106C221.471 145.853 222.273 151.83 221.929 157.463C221.586 163.21 220.098 168.727 217.35 173.67C217.235 173.9 217.121 174.245 216.777 174.705C216.548 175.164 216.32 175.509 216.205 175.739C212.084 182.521 207.848 187.464 203.612 191.027C199.261 194.59 195.025 196.889 190.789 198.499C180.371 202.407 170.067 201.602 161.366 197.349C152.208 192.866 144.881 184.82 141.103 174.475C139.042 168.842 138.011 163.21 138.24 157.807C138.469 152.29 139.729 147.002 142.133 142.06C143.965 138.381 146.827 134.128 150.605 130.105C153.925 126.542 157.932 123.093 162.397 120.105C163.542 119.3 164.801 118.611 166.06 117.921C167.778 117.231 169.151 116.541 170.525 116.082V116.082Z" fill="white"/>
<path d="M122.901 134.932L140.302 128.38C141.905 127.806 143.623 128.61 144.195 130.22C144.195 130.335 144.309 130.335 144.309 130.45L169.038 196.774C169.267 197.119 169.382 197.578 169.382 198.038C169.496 198.958 169.153 199.877 168.466 200.452L160.337 208.613C159.994 208.958 159.65 209.188 159.193 209.303L144.882 214.591C143.966 214.935 142.936 214.82 142.134 214.246L125.992 203.441L129.083 211.602C129.312 212.062 129.541 212.636 129.541 213.211C129.541 214.016 129.197 214.82 128.625 215.28L120.496 223.441C120.153 223.786 119.81 224.016 119.466 224.131L101.95 230.683C100.347 231.258 98.6297 230.453 98.0573 228.844L73.0994 161.83C72.6415 160.566 72.9849 159.186 74.0153 158.382L81.9148 150.45C82.2583 150.105 82.6017 149.876 83.0597 149.761L98.2862 144.128C99.2021 143.783 100.233 143.898 101.034 144.473L115.917 154.244L113.169 146.887C112.711 145.737 113.055 144.473 113.856 143.668L121.87 135.507C122.214 135.277 122.557 135.047 122.901 134.932V134.932Z" fill="white"/>
<path d="M63.596 244.707C56.7269 245.397 50.7737 244.132 45.6218 241.029C38.6382 236.891 33.4863 229.649 29.9373 220.338L16.199 183.325C15.7411 182.061 16.0845 180.682 17.1149 179.877L25.0144 171.946C25.3579 171.601 25.7013 171.371 26.0448 171.256L43.5611 164.704C45.1639 164.129 46.8811 164.934 47.4536 166.543L61.5353 204.361C62.3367 206.545 63.4815 208.614 65.0843 209.993C66.2292 211.028 67.7175 211.717 69.5493 211.832C69.8928 211.832 70.3507 211.832 70.6942 211.832C70.6942 211.143 70.5797 210.453 70.4652 209.763C70.2362 208.729 70.0072 207.694 69.5493 206.545L55.4676 168.727C55.0096 167.463 55.3531 166.083 56.3834 165.279L64.054 157.577C64.3974 157.118 64.8554 156.773 65.4278 156.543L82.9441 149.991C84.5469 149.416 86.2642 150.221 86.8366 151.83L100.804 189.303C102.979 195.05 104.009 200.567 103.895 205.74C103.78 210.913 102.636 215.74 100.231 220.108C98.2852 223.557 94.6216 227.12 90.9581 230.683C90.1567 231.488 89.2408 232.293 88.5539 232.982L88.4394 233.097C87.0656 234.592 85.4628 235.971 83.7455 237.12C77.9067 241.259 70.9231 243.902 63.596 244.707V244.707Z" fill="white"/>
<path fillRule="evenodd" clipRule="evenodd" d="M143.85 211.717L119.923 195.739L126.334 213.211H126.448L118.32 221.257L100.804 227.924L75.8457 160.91L83.9742 152.749L99.3152 147.117L121.869 161.945L115.916 145.967L123.93 137.806L141.331 131.254L166.404 198.268L158.275 206.429L143.85 211.717Z" fill="black"/>
<path fillRule="evenodd" clipRule="evenodd" d="M171.67 118.955C190.789 111.828 209.68 122.633 216.549 141.14C220.556 151.83 219.754 163.324 214.831 172.405C214.603 172.98 214.259 173.555 213.916 174.129C206.016 187.233 197.888 192.636 189.988 195.625C170.297 202.981 151.177 191.946 144.194 173.44C140.301 162.865 140.645 152.519 145.11 143.439C148.315 136.887 155.299 128.611 164.343 122.633C166.519 121.139 169.037 119.875 171.67 118.955V118.955ZM168.465 147.922C168.465 147.807 168.579 147.692 168.579 147.577C169.839 143.439 173.96 142.174 179.112 143.554C184.378 144.933 188.385 149.876 190.561 155.623C191.018 156.772 191.362 157.922 191.591 159.186C192.621 163.899 192.163 167.233 190.217 169.072C187.927 171.256 183.691 171.371 178.883 169.302C174.876 167.118 171.785 163.095 169.953 158.267C168.579 154.818 168.121 151.255 168.465 147.922Z" fill="black"/>
<path fillRule="evenodd" clipRule="evenodd" d="M113.283 177.807L126.334 213.211L108.818 219.763L83.9746 152.749L99.3157 147.117L136.524 171.485L123.93 137.806L141.332 131.254L166.404 198.268L151.979 203.555L113.283 177.807Z" fill="black"/>
<path fillRule="evenodd" clipRule="evenodd" d="M108.589 171.946L123.472 211.832L110.192 216.775L86.9512 154.129L98.9722 149.646L141.103 177.348L126.907 139.186L139.958 134.243L163.428 196.889L152.208 201.027L108.589 171.946Z" fill="white"/>
<path fillRule="evenodd" clipRule="evenodd" d="M128.968 140.106L139.043 136.312L161.253 195.97L152.438 199.188L105.384 167.808L121.412 210.913L111.223 214.706L89.0127 155.164L98.744 151.485L144.309 181.372L128.968 140.106Z" fill="#F8DA27"/>
<path fillRule="evenodd" clipRule="evenodd" d="M171.67 118.955C190.789 111.828 209.679 122.633 216.548 141.14C223.417 159.646 216.205 180.337 197.2 187.463C178.081 194.59 159.191 183.785 152.322 165.279C145.338 146.657 152.551 126.082 171.67 118.955ZM177.966 135.852C168.35 139.416 166.632 149.301 169.952 158.267C173.273 167.118 180.943 173.44 190.674 169.876C200.291 166.198 202.008 156.428 198.688 147.462C195.254 138.611 187.583 132.289 177.966 135.852Z" fill="black"/>
<path fillRule="evenodd" clipRule="evenodd" d="M172.471 121.139C190.331 114.472 207.962 124.587 214.488 142.059C220.899 159.416 214.259 178.727 196.399 185.509C178.539 192.176 160.908 181.946 154.383 164.589C147.971 147.117 154.497 127.806 172.471 121.139ZM177.165 133.668C166.289 137.691 163.999 148.956 167.777 159.071C171.555 169.187 180.485 176.084 191.476 172.06C202.352 167.922 204.642 156.773 200.864 146.772C196.971 136.657 188.041 129.645 177.165 133.668V133.668Z" fill="white"/>
<path fillRule="evenodd" clipRule="evenodd" d="M176.594 132.174C187.928 127.921 198.003 134.703 202.238 146.083C206.474 157.462 203.269 169.187 191.935 173.44C180.601 177.693 170.411 170.911 166.176 159.531C161.94 148.267 165.26 136.427 176.594 132.174ZM173.045 122.633C189.76 116.311 206.703 125.622 213 142.519C219.297 159.416 212.542 177.578 195.942 183.785C179.227 189.992 162.283 180.797 155.986 163.899C149.575 147.002 156.215 128.841 173.045 122.633Z" fill="#F8DA27"/>
<path fillRule="evenodd" clipRule="evenodd" d="M61.7634 241.833C48.0252 242.638 38.2939 233.787 32.9131 219.189L19.1748 182.176L27.1888 174.015L44.7051 167.463L58.7868 205.28C60.6186 210.108 63.9387 214.361 69.5485 214.591C71.1513 214.706 73.3265 214.476 73.7844 212.407C73.8989 209.993 73.441 207.579 72.5251 205.28L58.4434 167.463L66.5718 159.301L83.9736 152.75L97.9409 190.222C101.948 201.027 101.948 210.683 97.5974 218.499C95.5367 222.177 90.6138 226.545 86.4923 230.683C80.1956 237.35 70.6933 241.373 61.7634 241.833V241.833Z" fill="black"/>
<path fillRule="evenodd" clipRule="evenodd" d="M84.7755 229.534L84.89 229.764L81.2264 231.143C81.1119 231.143 80.9975 231.258 80.9975 231.258C80.883 231.258 80.7685 231.373 80.654 231.373L76.9905 232.752L76.876 232.523C59.3597 237.12 47.3387 227.925 41.042 211.028L27.3037 174.015L44.82 167.463L58.9017 205.28C60.7335 210.108 64.0536 214.361 69.6634 214.591C71.2662 214.706 72.9835 214.361 74.4718 213.786C76.0746 213.212 77.5629 212.292 78.7077 211.143C82.7147 207.349 82.4857 201.947 80.654 197.119L66.4578 159.301L83.9741 152.75L97.9413 190.222C104.238 207.234 101.147 221.603 84.7755 229.534V229.534Z" fill="black"/>
<path fillRule="evenodd" clipRule="evenodd" d="M81.799 228.384L80.3107 228.959C80.1962 228.959 80.0817 229.074 79.9672 229.074C79.8527 229.074 79.7383 229.189 79.6238 229.189L78.1355 229.764C60.7337 235.281 49.1706 226.89 43.1029 210.338L30.166 175.509L43.3319 170.566L56.6122 206.2C58.7874 211.947 62.9089 216.775 69.4346 217.005C71.3808 217.12 73.3271 216.775 75.1588 216.085C76.9906 215.395 78.8224 214.361 80.1962 212.982C84.8901 208.499 84.8901 202.177 82.7149 196.429L69.4346 160.796L82.6004 155.853L95.7662 191.142C101.948 207.694 98.6284 221.143 81.799 228.384V228.384Z" fill="white"/>
<path fillRule="evenodd" clipRule="evenodd" d="M32.2275 176.428L42.4167 172.635L55.1247 206.774C59.3606 218.039 68.2905 220.338 75.7321 217.579C83.1736 214.706 88.5544 207.119 84.204 195.854L71.4961 161.715L81.6853 157.922L94.2787 191.716C99.3161 205.165 99.3161 219.878 79.7391 227.58C79.6246 227.58 79.5101 227.695 79.3956 227.695C79.2811 227.695 79.1666 227.81 79.0521 227.81C59.8186 234.706 49.6293 223.671 44.4775 209.878L32.2275 176.428Z" fill="#F8DA27"/>
<path fillRule="evenodd" clipRule="evenodd" d="M118.549 146.428L124.846 139.991L128.395 149.531L122.098 155.968L118.549 146.428ZM123.243 159.187L129.539 152.75L130.913 156.313L124.617 162.75L123.243 159.187Z" fill="#58585A"/>
<path fillRule="evenodd" clipRule="evenodd" d="M61.0771 168.037L67.3738 161.6L70.9229 171.141L64.6262 177.578L61.0771 168.037ZM65.771 180.796L72.0678 174.359L73.4416 177.923L67.1449 184.36L65.771 180.796Z" fill="#58585A"/>
<path fillRule="evenodd" clipRule="evenodd" d="M29.709 204.246L36.0057 197.809L39.5547 207.349L33.258 213.786L29.709 204.246ZM34.5174 217.005L40.8141 210.568L41.0431 211.027C41.501 212.062 41.8445 213.096 42.3024 214.131L35.8912 220.568L34.5174 217.005Z" fill="#58585A"/>
<path fillRule="evenodd" clipRule="evenodd" d="M185.752 144.473L192.163 138.036C194.453 139.875 196.399 142.519 197.773 145.508L191.476 151.83C190.102 149.071 188.156 146.427 185.752 144.473ZM192.85 154.933L199.032 148.611C199.49 149.991 199.719 151.255 199.948 152.634L193.88 158.727V158.612C193.651 157.462 193.308 156.198 192.85 154.933Z" fill="#58585A"/>
</svg>




  return (
    <div>
    <h2> SVG Cards</h2>

    <div class="card__front" {...dragPosition()} style={{
                        position:'relative',
                        top: cardPosition.y,
                        left: cardPosition.x
                      }}>{back}</div>

      <ul className='ul__cards'>
        {svgCards?.map(cards => {
              return (
                <li key={cards.id} className="li__cards">    
                  <div class="flip__card">
                    <div class="card__frame">
                      <div class="card__front">
                      {parse(cards.code)} 
                      </div>
                      <div class="card__back">
                      {back}
                      </div>
                    </div>
                  </div>
                </li>
              )
        })}
      </ul>  
    </div>
  )
}

export default Svg



